[base]
env_name = azuki_local

[vec]
backend = Multiprocessing
num_envs = 720
num_workers = 12
batch_size = 720
zero_copy = True

[env]
direct_parallel = True

[policy]
subaction_temperature_initial = 1.2
subaction_temperature_final = 1.05
subaction_temperature_anneal_start_frac = 0.6
subaction_temperature_anneal_end_frac = 0.9
; Optional absolute-step overrides (take precedence over *_frac):
subaction_temperature_anneal_start_step = 150000000
subaction_temperature_anneal_end_step = 225000000
smoothing_eps_initial = 0.05
smoothing_eps_final = 0.01
smoothing_eps_anneal_start_frac = 0.6
smoothing_eps_anneal_end_frac = 0.9
smoothing_eps_anneal_start_step = 150000000
smoothing_eps_anneal_end_step = 225000000
; For a final 90%-100% exploit pass via resume:
; subaction_temperature_initial = 1.05
; subaction_temperature_final = 1.0
; subaction_temperature_anneal_start_frac = 0.9
; subaction_temperature_anneal_end_frac = 1.0
; smoothing_eps_initial = 0.01
; smoothing_eps_final = 0.0
; smoothing_eps_anneal_start_frac = 0.9
; smoothing_eps_anneal_end_frac = 1.0

[league]
enable = True 
activate_after_steps = 0
latest_ratio = 0.80
randomize_learner_seat = True
checkpoint_add_interval = 1
eval_interval = 1
eval_mode = inline
quick_eval_interval = 1
quick_eval_episodes = 64
full_eval_interval = 6
full_eval_episodes = 64
eval_episodes = 8
eval_max_steps = 400
keep_recent = 6
keep_mid = 4
keep_old = 3
min_candidate_epoch_gap = 1
promotion_min_winrate_vs_champion = 0.55
promotion_baseline_count = 2
promotion_min_winrate_vs_baseline = 0.45
promotion_min_games_vs_champion = 16
promotion_min_games_vs_baseline = 32
promotion_wilson_confidence_z = 1.0
state_path = experiments/league/main_v1/league_state.json
opponent_dir = experiments/league/main_v1/opponents

[train]
device = cuda
use_rnn = True
total_timesteps = 450017280
align_total_timesteps_up = True
batch_size = auto
min_batch_size = 32768
bptt_horizon = 16
update_epochs = 2
vf_coef = 1.0
ent_coef = 0.01
ent_coef_anneal_initial = 0.01
ent_coef_anneal_final = 0.002
ent_coef_anneal_start_frac = 0.6
ent_coef_anneal_end_frac = 0.9
; Optional absolute-step overrides:
ent_coef_anneal_start_step = 150000000
ent_coef_anneal_end_step = 225000000
; For a final 90%-100% exploit pass via resume:
; ent_coef_anneal_initial = 0.002
; ent_coef_anneal_final = 0.0002
; ent_coef_anneal_start_frac = 0.9
; ent_coef_anneal_end_frac = 1.0
checkpoint_interval = 25000
max_checkpoints = 24
gamma = 0.99
gae_lambda = 0.95
learning_rate = 0.003
adam_beta1 = 0.9
precision = bfloat16
compile = False
